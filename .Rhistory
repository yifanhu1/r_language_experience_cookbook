.libPaths("/data1/Project/Rstudio/projects/R_Library/")
.libPaths("/data1/Project/Rstudio/projects/R_Library/")
unlink('index_cache', recursive = TRUE)
sessionInfo()
knitr::knit(sessionInfo())
knit_print(x, ...)
.pt
.pt
library(.pt)
library(ggplot2)
.pt
.pt
.libPaths("/data1/Project/Rstudio/projects/R_Library/")
str(mpg)
library(ggplot2)
str(mpg)
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
library(tidyverse)
library(ggplot2)
library(reshape2)
library(ggsci)
theme_bw1 <- function (base_size = 11, base_family = "", base_line_size = base_size/22, base_rect_size = base_size/22)
{
theme_grey(base_size = base_size,
base_family = base_family,
base_line_size = base_line_size, base_rect_size = base_rect_size) %+replace%
theme(panel.background = element_rect(fill = "white", colour = NA),
panel.border = element_rect(fill = NA, colour = "black"),
panel.grid = element_line(colour = "grey92"),
panel.grid.minor = element_line(size = rel(0.5)),
strip.background = element_rect(fill = "grey85", colour = "grey20"),
legend.key = element_rect(fill = "white", colour = NA), complete = TRUE,
axis.text = element_text(size = rel(0.8), colour = "black"), )
}
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(reorder(class, count(class))))
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fct_infreq(f, ordered = NA)))
g + geom_bar(aes(x=fct_infreq(f, ordered = NA)))
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) + guides(fill="none")
fct_infreq(mpg$class)
a=fct_infreq(mpg$class)
a
levels(a)
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) + scale_fill_d3(breaks=fct_infreq(class, ordered = NA)) +guides(fill="none")
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class))
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) +scale_fill_d3(breaks=levels(fct_infreq(class, ordered = NA)))
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) +scale_fill_d3(breaks=levels(fct_infreq(mpg$class, ordered = NA)))
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) +scale_fill_d3(breaks=levels(fct_infreq(mpg$class, ordered = NA))) +guids(fill="none")
g <- ggplot(mpg, aes(class)) +
scale_fill_d3() + scale_color_d3() +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) +scale_fill_d3(breaks=levels(fct_infreq(mpg$class, ordered = NA))) + guides(fill="none")
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) +scale_fill_d3(breaks=levels(fct_infreq(mpg$class, ordered = NA))) + guides(fill="none")
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) + scale_fill_d3() + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) + scale_fill_d3()
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA)))
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) + scale_fill_d3() + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) + scale_fill_d3() + guides(fill="none")
g + geom_bar(aes(x=fct_infreq(class, ordered = NA), fill=class)) + scale_fill_d3()
fct_infreq(mpg$class, ordered = NA)
# 按照count降序排序
g <- ggplot(mpg %>% class=fct_infreq(class, ordered=NA), aes(class)) +
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
# 按照count降序排序
g <- ggplot(mpg %>% class=fct_infreq(class, ordered=NA), aes(class)) +
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
# 按照count降序排序
g <- ggplot(mpg %>% mutate(class=fct_infreq(class, ordered=NA)), aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
# 按照count降序排序, 直接修改mpg的class因子顺序, 图例也会跟着排序
g <- ggplot(mpg %>% mutate(class=fct_rev(fct_infreq(class, ordered=NA))), aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
# 按照count降序排序, 直接修改mpg的class因子顺序, 图例也会跟着排序
g <- ggplot(mpg %>% mutate(class=fct_infreq(class, ordered=NA)), aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
g <- ggplot(mpg, aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
# 按照count降序排序, 直接修改mpg的class因子顺序, 图例也会跟着排序
g <- ggplot(mpg %>% mutate(class=fct_infreq(class, ordered=NA)), aes(class)) +
theme_bw1(base_size = 12,base_line_size=1.5/.pt,base_rect_size=1.5/.pt) +
theme(panel.grid = element_blank())
g + geom_bar(aes(fct_rev(class)),fill="black")
g + geom_bar(aes(fill=class)) + guides(fill="none") + scale_fill_d3()
